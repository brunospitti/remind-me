{"version":3,"sources":["pages\\ToDosPage.js"],"names":["ToDosPage","state","completeListLayoutNum","showDetails","sortBy","filterChecked","itemsArray","sort","a","b","priority","nameA","task","toLowerCase","nameB","Date","start_date","getCurrentList","lists","props","currList","Object","keys","filter","list","id","activeList","items","item","hasOwnProperty","map","push","itemKey","completeListLayout","containerHeight","document","querySelector","clientHeight","itemHeight","length","maxItems","Math","floor","setState","getNextListIdToShowAfterDeleteCurrentList","listsLength","nextListIndex","indexOf","nextList","showDetailsFunc","handleSortByChange","filterCheckedFunc","handleFetchToDos","user","uid","ToDosWithAuth","ToDos","React","PureComponent","expandsToDoOuter","keyframes","compressToDoOuter","StyledContainer","mapStateToProps","mapDispatchToProps","handleSelectList","listId","dispatch","userId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AAEA;;AACA;;;;AAEA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA;;;;;;;;;;;;;;4LACJC,QAAQ;AACNC,6BAAuB,CADjB;AAENC,mBAAa,KAFP;AAGNC,cAAQ,gBAHF;AAINC,qBAAe;AAJT,aAkBRD,SAAS,UAACE,UAAD,EAAgB;AACvB,UAAI,MAAKL,KAAL,CAAWG,MAAX,KAAsB,gBAA1B,EAA4C;AAC1CE,mBAAWC,IAAX,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,iBAAOA,EAAEC,QAAF,GAAaF,EAAEE,QAAtB;AACD,SAFD;AAGD,OAJD,MAIO,IAAI,MAAKT,KAAL,CAAWG,MAAX,KAAsB,oBAA1B,EAAgD;AACrDE,mBAAWC,IAAX,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,cAAIE,QAAQH,EAAEI,IAAF,CAAOC,WAAP,EAAZ;AAAA,cACEC,QAAQL,EAAEG,IAAF,CAAOC,WAAP,EADV;AAEA,cAAIF,QAAQG,KAAZ;AACE;AACA,mBAAO,CAAC,CAAR;AACF,cAAIH,QAAQG,KAAZ,EAAmB,OAAO,CAAP;AACnB,iBAAO,CAAP,CAP6B,CAOnB;AACX,SARD;AASD,OAVM,MAUA,IAAI,MAAKb,KAAL,CAAWG,MAAX,KAAsB,oBAA1B,EAAgD;AACrDE,mBAAWC,IAAX,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,cAAIE,QAAQH,EAAEI,IAAF,CAAOC,WAAP,EAAZ;AAAA,cACEC,QAAQL,EAAEG,IAAF,CAAOC,WAAP,EADV;AAEA,cAAIF,QAAQG,KAAZ;AACE;AACA,mBAAO,CAAP;AACF,cAAIH,QAAQG,KAAZ,EAAmB,OAAO,CAAC,CAAR;AACnB,iBAAO,CAAP,CAP6B,CAOnB;AACX,SARD;AASD,OAVM,MAUA,IAAI,MAAKb,KAAL,CAAWG,MAAX,KAAsB,QAA1B,EAAoC;AACzCE,mBAAWC,IAAX,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,iBAAO,IAAIM,IAAJ,CAASN,EAAEO,UAAX,IAAyB,IAAID,IAAJ,CAASP,EAAEQ,UAAX,CAAhC;AACD,SAFD;AAGD,OAJM,MAIA,IAAI,MAAKf,KAAL,CAAWG,MAAX,KAAsB,QAA1B,EAAoC;AACzCE,mBAAWC,IAAX,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,iBAAO,IAAIM,IAAJ,CAASP,EAAEQ,UAAX,IAAyB,IAAID,IAAJ,CAASN,EAAEO,UAAX,CAAhC;AACD,SAFD;AAGD;;AAED,aAAOV,UAAP;AACD,aAEDW,iBAAiB,YAAM;AACrB,UAAIC,qBAAa,MAAKC,KAAL,CAAWD,KAAxB,CAAJ;AACA,UAAIE,WAAWC,OAAOC,IAAP,CAAYJ,KAAZ,EAAmBK,MAAnB,CACb;AAAA,eAAQL,MAAMM,IAAN,EAAYC,EAAZ,KAAmB,MAAKN,KAAL,CAAWO,UAAtC;AAAA,OADa,CAAf;AAGA,UAAIC,QAAQT,MAAME,QAAN,EAAgBO,KAA5B;AACA,UAAIrB,aAAa,EAAjB;AACAe,aAAOC,IAAP,CAAYK,KAAZ,EAAmBJ,MAAnB,CAA0B;AAAA,eAAQ,CAACI,MAAMC,IAAN,EAAYC,cAAZ,CAA2B,UAA3B,CAAT;AAAA,OAA1B,EAA2EC,GAA3E,CAA+E;AAAA,eAAWxB,WAAWyB,IAAX,CAAgBJ,MAAMK,OAAN,CAAhB,CAAX;AAAA,OAA/E;;AAEA,YAAK5B,MAAL,CAAYE,UAAZ;;AAEAY,YAAME,QAAN,EAAgBO,KAAhB,GAAwBrB,UAAxB;;AAEA,aAAOY,MAAME,QAAN,CAAP;AACD,aAEDa,qBAAqB,YAAM;AACzB,UAAIb,WAAW,MAAKH,cAAL,EAAf;AACA,UAAIiB,kBAAkBC,SAASC,aAAT,CAAuB,SAAvB,EAAkCC,YAAxD;AACA,UAAIC,aACFlB,SAASO,KAAT,CAAeY,MAAf,GAAwB,CAAxB,GACIJ,SAASC,aAAT,CAAuB,eAAvB,EAAwCC,YAD5C,GAEI,EAHN;AAIA,UAAIG,WAAWC,KAAKC,KAAL,CAAWR,kBAAkBI,UAA7B,IAA2C,CAA1D;AACA,UAAIlB,SAASO,KAAT,CAAeY,MAAf,GAAwBC,QAA5B,EAAsC;AACpC,YAAItC,wBAAwBsC,WAAWpB,SAASO,KAAT,CAAeY,MAAtD;AACA,cAAKI,QAAL,CAAc,EAAEzC,4CAAF,EAAd,EAAyC,YAAM,CAAE,CAAjD;AACD,OAHD,MAGO;AACL,cAAKyC,QAAL,CAAc,EAAEzC,uBAAuB,CAAzB,EAAd,EAA4C,YAAM,CAAE,CAApD;AACD;AACF,aAED0C,4CAA4C,YAAM;AAChD,UAAI1B,qBAAa,MAAKC,KAAL,CAAWD,KAAxB,CAAJ;AACA,UAAIE,WAAWC,OAAOC,IAAP,CAAYJ,KAAZ,EAAmBK,MAAnB,CACb;AAAA,eAAQL,MAAMM,IAAN,EAAYC,EAAZ,KAAmB,MAAKN,KAAL,CAAWO,UAAtC;AAAA,OADa,EAEb,CAFa,CAAf;AAGA,UAAImB,cAAcxB,OAAOC,IAAP,CAAY,MAAKH,KAAL,CAAWD,KAAvB,EAA8BqB,MAA9B,GAAuC,CAAzD;AACA,UAAIO,gBAAgBzB,OAAOC,IAAP,CAAYJ,KAAZ,EAAmB6B,OAAnB,CAA2B3B,QAA3B,IAAuC,CAA3D;AACA,UAAI4B,WACFF,gBAAgBD,WAAhB,GACI3B,MAAMG,OAAOC,IAAP,CAAYJ,KAAZ,EAAmB,CAAnB,CAAN,EAA6BO,EADjC,GAEIP,MAAMG,OAAOC,IAAP,CAAYJ,KAAZ,EAAmB4B,aAAnB,CAAN,EAAyCrB,EAH/C;;AAKA,aAAOuB,QAAP;AACD,aAEDC,kBAAkB,uBAAe;AAC/B,YAAKN,QAAL,CAAc,EAAExC,wBAAF,EAAd;AACD,aAED+C,qBAAqB,kBAAU;AAC7B,YAAKP,QAAL,CAAc,EAAEvC,cAAF,EAAd,EAA0B,YAAM,CAAE,CAAlC;AACD,aAED+C,oBAAoB,YAAM;AACxB,YAAKR,QAAL,CAAc,EAAEtC,eAAe,CAAC,MAAKJ,KAAL,CAAWI,aAA7B,EAAd,GACE,YAAM;AACJ,cAAKY,cAAL;AACD,OAHH;AAID;;;;;wCA7GmB;AAClB,WAAKE,KAAL,CAAWiC,gBAAX,CAA4B,KAAKjC,KAAL,CAAWkC,IAAX,CAAgBC,GAA5C;AACA,UACE,KAAKnC,KAAL,CAAWD,KAAX,IAAoB,SAApB,IACAG,OAAOC,IAAP,CAAY,KAAKH,KAAL,CAAWD,KAAvB,EAA8BqB,MAA9B,GAAuC,CAFzC,EAGE;AACA,aAAKN,kBAAL;AACA,aAAKW,yCAAL;AACD;AACF;;;6BAsGQ;AACP,UAAIW,gBAAgB,8BAAYC,eAAZ,CAApB;;AAEA,aACE;AAAC,uBAAD;AAAA;AACE,qBAAW,KAAKvD,KAAL,CAAWE,WAAX,GAAyB,UAAzB,GAAsC;AADnD;AAGG,aAAKgB,KAAL,CAAWD,KAAX,KAAqB,SAArB,GACC,8BAAC,iBAAD,OADD,GAEGG,OAAOC,IAAP,CAAY,KAAKH,KAAL,CAAWD,KAAvB,EAA8BqB,MAA9B,GAAuC,CAAvC,GACF;AAAC,yBAAD,CAAO,QAAP;AAAA;AACE,wCAAC,aAAD;AACE,yBAAa,KAAKtB,cAAL,EADf;AAEE,wBAAY,KAAK2B,yCAAL,EAFd;AAGE,+BAAmB,KAAKO,iBAH1B;AAIE,2BAAe,KAAKlD,KAAL,CAAWI,aAJ5B;AAKE,mCAAuB,KAAKJ,KAAL,CAAWC,qBALpC;AAME,gCAAoB,KAAK+B,kBAN3B;AAOE,yBAAa,KAAKhC,KAAL,CAAWE,WAP1B;AAQE,6BAAiB,KAAK8C,eARxB;AASE,oBAAQ,KAAKhD,KAAL,CAAWG,MATrB;AAUE,gCAAoB,KAAK8C;AAV3B,YADF;AAaE,wCAAC,sBAAD,IAAc,oBAAoB,KAAKjB,kBAAvC;AAbF,SADE,GAiBF,8BAAC,iBAAD;AAtBJ,OADF;AA2BD;;;;EArJqBwB,gBAAMC;;AAwJ9B;;;AACA,IAAMC,uBAAmBC,2BAAnB,qCAAN;;AASA,IAAMC,wBAAoBD,2BAApB,qCAAN;;AASA,IAAME,kBAAkB,gCAAO,KAAP,CAAlB;AAAA;AAAA;AAAA,+OAMWH,gBANX,EASWE,iBATX,CAAN;;AAkBA,IAAME,kBAAkB,SAAlBA,eAAkB;AAAA,MAAG7C,KAAH,SAAGA,KAAH;AAAA,MAAUQ,UAAV,SAAUA,UAAV;AAAA,MAAsB2B,IAAtB,SAAsBA,IAAtB;AAAA,SAAkC;AACxDnC,gBADwD;AAExDQ,0BAFwD;AAGxD2B;AAHwD,GAAlC;AAAA,CAAxB;;AAMA,IAAMW,qBAAqB,SAArBA,kBAAqB;AAAA,SAAa;AACtCC,oBADsC,4BACrBC,MADqB,EACb;AACvBC,eAAS,0BAAWD,MAAX,CAAT;AACD,KAHqC;AAItCd,oBAJsC,4BAIrBgB,MAJqB,EAIb;AACvBD,eAAS,4BAAWC,MAAX,CAAT;AACD;AANqC,GAAb;AAAA,CAA3B;;kBASe,yBACbL,eADa,EAEbC,kBAFa,EAGbhE,SAHa","file":"ToDosPage.729e7ca4.map","sourceRoot":"..\\src","sourcesContent":["import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { fetchToDos } from \"../redux/actionCreators/fetchToDos\";\r\nimport selectList from \"../redux/actionCreators/selectList\";\r\n\r\nimport { requireAuth } from \"../hocs/requireAuth\";\r\n\r\nimport ToDos from \"../components/ToDos\";\r\nimport ListsManager from \"../components/ListsManager\";\r\nimport NoToDos from \"../components/NoToDos\";\r\nimport Loading from \"../components/basics/Loading\";\r\n\r\nclass ToDosPage extends React.PureComponent {\r\n  state = {\r\n    completeListLayoutNum: 0,\r\n    showDetails: false,\r\n    sortBy: \"most-important\",\r\n    filterChecked: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.handleFetchToDos(this.props.user.uid);\r\n    if (\r\n      this.props.lists != \"loading\" &&\r\n      Object.keys(this.props.lists).length > 0\r\n    ) {\r\n      this.completeListLayout();\r\n      this.getNextListIdToShowAfterDeleteCurrentList();\r\n    }\r\n  }\r\n\r\n  sortBy = (itemsArray) => {\r\n    if (this.state.sortBy === \"most-important\") {\r\n      itemsArray.sort(function(a, b) {\r\n        return b.priority - a.priority;\r\n      });\r\n    } else if (this.state.sortBy === \"alphabetically-a-z\") {\r\n      itemsArray.sort(function(a, b) {\r\n        var nameA = a.task.toLowerCase(),\r\n          nameB = b.task.toLowerCase();\r\n        if (nameA < nameB)\r\n          //sort string ascending\r\n          return -1;\r\n        if (nameA > nameB) return 1;\r\n        return 0; //default return value (no sorting)\r\n      });\r\n    } else if (this.state.sortBy === \"alphabetically-z-a\") {\r\n      itemsArray.sort(function(a, b) {\r\n        var nameA = a.task.toLowerCase(),\r\n          nameB = b.task.toLowerCase();\r\n        if (nameA < nameB)\r\n          //sort string ascending\r\n          return 1;\r\n        if (nameA > nameB) return -1;\r\n        return 0; //default return value (no sorting)\r\n      });\r\n    } else if (this.state.sortBy === \"newest\") {\r\n      itemsArray.sort(function(a, b) {\r\n        return new Date(b.start_date) - new Date(a.start_date);\r\n      });\r\n    } else if (this.state.sortBy === \"oldest\") {\r\n      itemsArray.sort(function(a, b) {\r\n        return new Date(a.start_date) - new Date(b.start_date);\r\n      });\r\n    }\r\n\r\n    return itemsArray\r\n  }\r\n\r\n  getCurrentList = () => {\r\n    let lists = { ...this.props.lists };\r\n    let currList = Object.keys(lists).filter(\r\n      list => lists[list].id === this.props.activeList\r\n    );\r\n    let items = lists[currList].items;\r\n    let itemsArray = []\r\n    Object.keys(items).filter(item => !items[item].hasOwnProperty('ignoreMe')).map(itemKey => itemsArray.push(items[itemKey]))\r\n\r\n    this.sortBy(itemsArray)\r\n\r\n    lists[currList].items = itemsArray;\r\n\r\n    return lists[currList];\r\n  };\r\n\r\n  completeListLayout = () => {\r\n    let currList = this.getCurrentList();\r\n    let containerHeight = document.querySelector(\"#to-dos\").clientHeight;\r\n    let itemHeight =\r\n      currList.items.length > 0\r\n        ? document.querySelector(\"#single-to-do\").clientHeight\r\n        : 61;\r\n    let maxItems = Math.floor(containerHeight / itemHeight) - 1;\r\n    if (currList.items.length < maxItems) {\r\n      let completeListLayoutNum = maxItems - currList.items.length;\r\n      this.setState({ completeListLayoutNum }, () => {});\r\n    } else {\r\n      this.setState({ completeListLayoutNum: 0 }, () => {});\r\n    }\r\n  };\r\n\r\n  getNextListIdToShowAfterDeleteCurrentList = () => {\r\n    let lists = { ...this.props.lists };\r\n    let currList = Object.keys(lists).filter(\r\n      list => lists[list].id === this.props.activeList\r\n    )[0];\r\n    let listsLength = Object.keys(this.props.lists).length - 1;\r\n    let nextListIndex = Object.keys(lists).indexOf(currList) + 1;\r\n    let nextList =\r\n      nextListIndex > listsLength\r\n        ? lists[Object.keys(lists)[0]].id\r\n        : lists[Object.keys(lists)[nextListIndex]].id;\r\n\r\n    return nextList;\r\n  };\r\n\r\n  showDetailsFunc = showDetails => {\r\n    this.setState({ showDetails });\r\n  };\r\n\r\n  handleSortByChange = sortBy => {\r\n    this.setState({ sortBy }, () => {});\r\n  };\r\n\r\n  filterCheckedFunc = () => {\r\n    this.setState({ filterChecked: !this.state.filterChecked }),\r\n      () => {\r\n        this.getCurrentList();\r\n      };\r\n  };\r\n\r\n  render() {\r\n    let ToDosWithAuth = requireAuth(ToDos);\r\n\r\n    return (\r\n      <StyledContainer\r\n        className={this.state.showDetails ? \"expanded\" : \"compressed\"}\r\n      >\r\n        {this.props.lists === \"loading\" ? (\r\n          <Loading />\r\n        ) : Object.keys(this.props.lists).length > 0 ? (\r\n          <React.Fragment>\r\n            <ToDosWithAuth\r\n              currentList={this.getCurrentList()}\r\n              nextListId={this.getNextListIdToShowAfterDeleteCurrentList()}\r\n              filterCheckedFunc={this.filterCheckedFunc}\r\n              filterChecked={this.state.filterChecked}\r\n              completeListLayoutNum={this.state.completeListLayoutNum}\r\n              completeListLayout={this.completeListLayout}\r\n              showDetails={this.state.showDetails}\r\n              showDetailsFunc={this.showDetailsFunc}\r\n              sortBy={this.state.sortBy}\r\n              handleSortByChange={this.handleSortByChange}\r\n            />\r\n            <ListsManager completeListLayout={this.completeListLayout} />\r\n          </React.Fragment>\r\n        ) : (\r\n          <NoToDos />\r\n        )}\r\n      </StyledContainer>\r\n    );\r\n  }\r\n}\r\n\r\n// styled components\r\nconst expandsToDoOuter = keyframes`\r\n  0% {\r\n    width: 60%;\r\n  }\r\n  100% {\r\n    width: 80%;\r\n  }\r\n`;\r\n\r\nconst compressToDoOuter = keyframes`\r\n  0% {\r\n    width: 80%;\r\n  }\r\n  100% {\r\n    width: 60%;\r\n  }\r\n`;\r\n\r\nconst StyledContainer = styled(\"div\")`\r\n  width: 60%;\r\n  margin: 30px auto;\r\n  position: relative;\r\n  transition: all 0.25s ease;\r\n  &.expanded {\r\n    animation: ${expandsToDoOuter} 0.25s ease forwards;\r\n  }\r\n  &.compressed {\r\n    animation: ${compressToDoOuter} 0.25s ease forwards;\r\n  }\r\n  h2 {\r\n    text-transform: capitalize;\r\n    font-size: 2em;\r\n    margin-bottom: 20px;\r\n  }\r\n`;\r\n\r\nconst mapStateToProps = ({ lists, activeList, user }) => ({\r\n  lists,\r\n  activeList,\r\n  user\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  handleSelectList(listId) {\r\n    dispatch(selectList(listId));\r\n  },\r\n  handleFetchToDos(userId) {\r\n    dispatch(fetchToDos(userId));\r\n  }\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ToDosPage);\r\n"]}